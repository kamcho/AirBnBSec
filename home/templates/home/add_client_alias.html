{% extends 'users/base.html' %}
{% load static %}

{% block title %}Add Client Alias - AirBnBSec{% endblock %}

{% block extra_css %}
<style>
    .form-container {
        max-width: 1000px;
        width: 95%;
        margin: 2rem auto;
        padding: 2.5rem;
        background: #1a2238;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        border: 1px solid #2d3748;
    }
    
    .form-title {
        color: #4f46e5;
        font-weight: 600;
        margin-bottom: 1.5rem;
        text-align: center;
        font-size: 1.5rem;
    }
    
    .form-label {
        color: #e2e8f0;
        font-weight: 500;
        margin-bottom: 0.5rem;
        display: block;
    }
    
    .form-control {
        background-color: #2d3748 !important;
        border: 1px solid #4a5568 !important;
        color: #e2e8f0 !important;
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        transition: all 0.2s;
        width: 100%;
    }
    
    .form-control:focus {
        border-color: #4f46e5 !important;
        box-shadow: 0 0 0 0.2rem rgba(79, 70, 229, 0.25);
    }
    
    .form-control:read-only {
        background-color: #2d3748 !important;
        opacity: 0.8;
    }
    
    .btn-custom {
        padding: 0.5rem 1.5rem;
        border-radius: 0.5rem;
        font-weight: 500;
        transition: all 0.2s;
    }
    
    .btn-primary {
        background-color: #4f46e5;
        border: none;
    }
    
    .btn-primary:hover {
        background-color: #4338ca;
        transform: translateY(-1px);
    }
    
    .btn-secondary {
        background-color: #4a5568;
        border: none;
    }
    
    .btn-secondary:hover {
        background-color: #2d3748;
        transform: translateY(-1px);
    }
    
    .required-field::after {
        content: " *";
        color: #f56565;
    }
    
    .form-section {
        margin-bottom: 2rem;
        padding: 1.5rem;
        background: #1e293b;
        border-radius: 0.5rem;
        border-left: 4px solid #4f46e5;
    }
    
    .form-section-title {
        color: #a0aec0;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 1rem;
        font-weight: 600;
    }
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="form-container">
        <h1 class="form-title">Add Client Alias</h1>
        
        <form method="post" class="needs-validation" novalidate>
            {% csrf_token %}
            
            <div class="form-section mb-4">
                <div class="form-section-title">Verified Information</div>
                <div class="row">
                    <div class="col-md-8 mb-3">
                        <label class="form-label">Verified Name</label>
                        <input type="text" class="form-control" value="{{ api_full_name }}" readonly />
                        <input type="hidden" name="api_first_name" value="{{ api_first_name }}" />
                        <input type="hidden" name="api_last_name" value="{{ api_last_name }}" />
                    </div>
                    
                    <div class="col-md-8 mb-3">
                        <label class="form-label">ID Number (optional)</label>
                        <input type="text"  readonly
                               name="id_number" 
                               class="form-control" 
                               value="{{ id_number }}" 
                               placeholder="e.g., 12345678" 
                               pattern="[0-9]{7,8}"
                               title="Please enter a valid ID number (7-8 digits)" />
                        <div class="invalid-feedback">
                            Please enter a valid ID number (7-8 digits)
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="form-section mb-4">
                <div class="form-section-title">Alias Information</div>
                <div class="row">
                    <div class="col-md-8 mb-3">
                        <label class="form-label required-field">First Name</label>
                        <input type="text" 
                               name="alias_first_name" 
                               class="form-control" 
                               required 
                               pattern=".{2,}"
                               title="Please enter at least 2 characters" />
                        <div class="invalid-feedback">
                            Please provide a first name.
                        </div>
                    </div>
                    
                    <div class="col-md-8 mb-3">
                        <label class="form-label">Last Name</label>
                        <input type="text" 
                               name="alias_last_name" 
                               class="form-control" 
                               pattern=".{2,}"
                               title="Please enter at least 2 characters" />
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-8 mb-3">
                        <label class="form-label required-field">Phone Number</label>
                        <input type="tel" 
                               name="phone" 
                               class="form-control" 
                               required 
                               placeholder="e.g., 0712345678" 
                               pattern="[0-9]{10}"
                               title="Please enter a valid 10-digit phone number" />
                        <div class="invalid-feedback">
                            Please provide a valid phone number (10 digits).
                        </div>
                    </div>
                    
                    <div class="col-md-8 mb-3">
                        <label class="form-label">Email (optional)</label>
                        <input type="email" 
                               name="email" 
                               class="form-control" 
                               placeholder="e.g., user@example.com" />
                        <div class="invalid-feedback">
                            Please provide a valid email address.
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="d-flex justify-content-between align-items-center pt-3">
                <a href="{% url 'home:add_offender' incident.id %}" class="btn btn-secondary btn-custom">
                    <i class="fas fa-arrow-left me-2"></i>Back to Add Offender
                </a>
                <button type="submit" class="btn btn-primary btn-custom">
                    <i class="fas fa-save me-2"></i>Save and Link
                </button>
            </div>
        </form>
    </div>
</div>

<script>
// Client-side form validation
(function () {
    'use strict'
    
    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.querySelectorAll('.needs-validation')
    
    // Loop over them and prevent submission
    Array.prototype.slice.call(forms).forEach(function (form) {
        form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
            }
            
            form.classList.add('was-validated')
        }, false)
    })
})()
</script>
{% endblock %}



